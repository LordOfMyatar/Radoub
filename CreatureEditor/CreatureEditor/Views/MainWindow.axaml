<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:controls="using:Radoub.UI.Controls"
        xmlns:panels="using:CreatureEditor.Views.Panels"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="800"
        x:Class="CreatureEditor.Views.MainWindow"
        x:Name="MainWindowInstance"
        Title="Quartermaster"
        Width="1200" Height="800"
        MinWidth="800" MinHeight="600"
        KeyDown="OnWindowKeyDown">

    <Window.Styles>
        <!-- Navigation Button Style -->
        <Style Selector="Button.NavButton">
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="12,10"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="CornerRadius" Value="4"/>
        </Style>
        <Style Selector="Button.NavButton:pointerover">
            <Setter Property="Background" Value="{DynamicResource SystemControlHighlightListLowBrush}"/>
        </Style>
        <Style Selector="Button.NavButton.Selected">
            <Setter Property="Background" Value="{DynamicResource SystemAccentColor}"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>
    </Window.Styles>

    <DockPanel>
        <!-- Menu Bar -->
        <Menu DockPanel.Dock="Top" AutomationProperties.AutomationId="MainMenu">
            <MenuItem Header="_File">
                <MenuItem Header="_Open..." Click="OnOpenClick" InputGesture="Ctrl+O"/>
                <MenuItem Header="Open _Recent" x:Name="RecentFilesMenu"/>
                <Separator/>
                <MenuItem Header="_Save" Click="OnSaveClick" InputGesture="Ctrl+S" IsEnabled="{Binding HasFile, ElementName=MainWindowInstance}"/>
                <MenuItem Header="Save _As..." Click="OnSaveAsClick" InputGesture="Ctrl+Shift+S" IsEnabled="{Binding HasFile, ElementName=MainWindowInstance}"/>
                <Separator/>
                <MenuItem Header="_Close" Click="OnCloseFileClick" IsEnabled="{Binding HasFile, ElementName=MainWindowInstance}"/>
                <MenuItem Header="E_xit" Click="OnExitClick" InputGesture="Alt+F4"/>
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Header="_Undo" InputGesture="Ctrl+Z" IsEnabled="False"/>
                <MenuItem Header="_Redo" InputGesture="Ctrl+Y" IsEnabled="False"/>
                <Separator/>
                <MenuItem Header="Cu_t" InputGesture="Ctrl+X" IsEnabled="False"/>
                <MenuItem Header="_Copy" InputGesture="Ctrl+C" IsEnabled="False"/>
                <MenuItem Header="_Paste" InputGesture="Ctrl+V" IsEnabled="False"/>
                <MenuItem Header="_Delete" Click="OnDeleteClick" InputGesture="Delete" IsEnabled="{Binding HasSelection, ElementName=MainWindowInstance}"/>
            </MenuItem>
            <MenuItem Header="_View">
                <MenuItem Header="_Settings..." Click="OnSettingsClick"/>
            </MenuItem>
            <MenuItem Header="_Help">
                <MenuItem Header="_About Quartermaster" Click="OnAboutClick"/>
            </MenuItem>
        </Menu>

        <!-- Status Bar -->
        <Border DockPanel.Dock="Bottom" BorderBrush="{DynamicResource SystemBaseMediumLowColor}" BorderThickness="0,1,0,0" Padding="5,2"
                AutomationProperties.AutomationId="StatusBar">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="StatusText" Grid.Column="0" Text="Ready" AutomationProperties.AutomationId="StatusText"/>
                <TextBlock x:Name="InventoryCountText" Grid.Column="1" Text="" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" Margin="20,0,0,0"/>
                <TextBlock x:Name="FilePathText" Grid.Column="2" Text="" Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}" Margin="20,0,0,0"/>
            </Grid>
        </Border>

        <!-- Main Content - Sidebar + Content Layout -->
        <Grid x:Name="MainGrid">
            <Grid.ColumnDefinitions>
                <!-- Sidebar -->
                <ColumnDefinition Width="200" MinWidth="150" MaxWidth="300"/>
                <ColumnDefinition Width="5"/>
                <!-- Content Area -->
                <ColumnDefinition Width="*" MinWidth="400"/>
            </Grid.ColumnDefinitions>

            <!-- Sidebar -->
            <Border Grid.Column="0" BorderBrush="{DynamicResource SystemBaseMediumLowColor}" BorderThickness="0,0,1,0"
                    AutomationProperties.AutomationId="Sidebar">
                <DockPanel>
                    <!-- Character Header (Portrait + Name) -->
                    <Border DockPanel.Dock="Top" Padding="10" BorderBrush="{DynamicResource SystemBaseMediumLowColor}" BorderThickness="0,0,0,1">
                        <StackPanel Spacing="8">
                            <!-- Portrait Placeholder -->
                            <Border Width="100" Height="100"
                                    Background="{DynamicResource SystemControlBackgroundBaseLowBrush}"
                                    BorderBrush="{DynamicResource SystemBaseMediumLowColor}"
                                    BorderThickness="1"
                                    CornerRadius="4"
                                    HorizontalAlignment="Center"
                                    AutomationProperties.AutomationId="CharacterPortrait">
                                <TextBlock Text="No Portrait"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                           FontSize="11"/>
                            </Border>

                            <!-- Character Name -->
                            <TextBlock x:Name="CharacterNameText"
                                       Text="No Character Loaded"
                                       FontWeight="Bold"
                                       FontSize="14"
                                       HorizontalAlignment="Center"
                                       TextWrapping="Wrap"
                                       TextAlignment="Center"
                                       AutomationProperties.AutomationId="CharacterName"/>

                            <!-- Race/Class Summary -->
                            <TextBlock x:Name="CharacterSummaryText"
                                       Text=""
                                       FontSize="12"
                                       HorizontalAlignment="Center"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                       TextWrapping="Wrap"
                                       TextAlignment="Center"
                                       AutomationProperties.AutomationId="CharacterSummary"/>
                        </StackPanel>
                    </Border>

                    <!-- Navigation Buttons -->
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Spacing="2" Margin="8">
                            <Button x:Name="NavStats" Classes="NavButton Selected" Content="Stats"
                                    Click="OnNavButtonClick" Tag="Stats"
                                    AutomationProperties.AutomationId="NavButton_Stats"/>
                            <Button x:Name="NavClasses" Classes="NavButton" Content="Classes"
                                    Click="OnNavButtonClick" Tag="Classes"
                                    AutomationProperties.AutomationId="NavButton_Classes"/>
                            <Button x:Name="NavSkills" Classes="NavButton" Content="Skills"
                                    Click="OnNavButtonClick" Tag="Skills"
                                    AutomationProperties.AutomationId="NavButton_Skills"/>
                            <Button x:Name="NavFeats" Classes="NavButton" Content="Feats"
                                    Click="OnNavButtonClick" Tag="Feats"
                                    AutomationProperties.AutomationId="NavButton_Feats"/>
                            <Button x:Name="NavSpells" Classes="NavButton" Content="Spells"
                                    Click="OnNavButtonClick" Tag="Spells"
                                    AutomationProperties.AutomationId="NavButton_Spells"/>
                            <Button x:Name="NavInventory" Classes="NavButton" Content="Inventory"
                                    Click="OnNavButtonClick" Tag="Inventory"
                                    AutomationProperties.AutomationId="NavButton_Inventory"/>

                            <!-- Separator -->
                            <Separator Margin="0,8"/>

                            <Button x:Name="NavAdvanced" Classes="NavButton" Content="Advanced"
                                    Click="OnNavButtonClick" Tag="Advanced"
                                    AutomationProperties.AutomationId="NavButton_Advanced"/>
                            <Button x:Name="NavScripts" Classes="NavButton" Content="Scripts"
                                    Click="OnNavButtonClick" Tag="Scripts"
                                    AutomationProperties.AutomationId="NavButton_Scripts"/>
                        </StackPanel>
                    </ScrollViewer>
                </DockPanel>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch"
                          Background="{DynamicResource SystemBaseMediumLowColor}"
                          AutomationProperties.AutomationId="SidebarSplitter"/>

            <!-- Content Area -->
            <Border Grid.Column="2" AutomationProperties.AutomationId="ContentArea">
                <Grid x:Name="ContentPanel">
                    <!-- Stats Panel (placeholder) -->
                    <panels:StatsPanel x:Name="StatsPanelContent" IsVisible="True"
                                       AutomationProperties.AutomationId="StatsPanel"/>

                    <!-- Classes Panel (placeholder) -->
                    <panels:PlaceholderPanel x:Name="ClassesPanelContent" IsVisible="False"
                                             SectionName="Classes"
                                             AutomationProperties.AutomationId="ClassesPanel"/>

                    <!-- Skills Panel (placeholder) -->
                    <panels:PlaceholderPanel x:Name="SkillsPanelContent" IsVisible="False"
                                             SectionName="Skills"
                                             AutomationProperties.AutomationId="SkillsPanel"/>

                    <!-- Feats Panel (placeholder) -->
                    <panels:PlaceholderPanel x:Name="FeatsPanelContent" IsVisible="False"
                                             SectionName="Feats"
                                             AutomationProperties.AutomationId="FeatsPanel"/>

                    <!-- Spells Panel (placeholder) -->
                    <panels:PlaceholderPanel x:Name="SpellsPanelContent" IsVisible="False"
                                             SectionName="Spells"
                                             AutomationProperties.AutomationId="SpellsPanel"/>

                    <!-- Inventory Panel -->
                    <panels:InventoryPanel x:Name="InventoryPanelContent" IsVisible="False"
                                           AutomationProperties.AutomationId="InventoryPanel"/>

                    <!-- Advanced Panel (placeholder) -->
                    <panels:PlaceholderPanel x:Name="AdvancedPanelContent" IsVisible="False"
                                             SectionName="Advanced"
                                             AutomationProperties.AutomationId="AdvancedPanel"/>

                    <!-- Scripts Panel (placeholder) -->
                    <panels:PlaceholderPanel x:Name="ScriptsPanelContent" IsVisible="False"
                                             SectionName="Scripts"
                                             AutomationProperties.AutomationId="ScriptsPanel"/>
                </Grid>
            </Border>
        </Grid>
    </DockPanel>
</Window>
